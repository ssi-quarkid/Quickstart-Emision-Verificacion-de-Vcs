"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InboxSender = void 0;
const utils_1 = require("../utils");
const http_client_1 = require("./http-client");
class InboxSender {
    async sendMessage(params) {
        const { dateCreated: date, objectId } = params.message.descriptor;
        const request = {
            id: (0, utils_1.createUUID)(),
            target: params.targetDID,
            messages: [
                Object.assign(Object.assign({}, params.message), { descriptor: Object.assign(Object.assign({}, params.message.descriptor), { objectId: objectId || (0, utils_1.createUUID)(), dateCreated: (0, utils_1.parseDateToUnixTimestamp)(date) }) }),
            ],
        };
        await http_client_1.httpClient.post(params.targetInboxURL, request);
        return request.messages;
    }
}
exports.InboxSender = InboxSender;
//# sourceMappingURL=inbox-sender.js.map